--- origorg/gudy/azureus2/ui/swt/update/UpdateMonitor.java	2007-11-30 10:44:14.000000000 -0500
+++ org/gudy/azureus2/ui/swt/update/UpdateMonitor.java	2008-01-29 10:08:47.000000000 -0500
@@ -89,70 +89,6 @@
 	protected UpdateMonitor(AzureusCore _azureus_core) {
 		azCore = _azureus_core;
 
-		PluginInterface defPI = azCore.getPluginManager().getDefaultPluginInterface();
-		UpdateManager um = defPI.getUpdateManager();
-
-		um.addListener(new UpdateManagerListener() {
-			public void checkInstanceCreated(UpdateCheckInstance instance) {
-				instance.addListener(UpdateMonitor.this);
-				
-				new updateStatusChanger(instance);
-			}
-		});
-
-		um.addVerificationListener(new UpdateManagerVerificationListener() {
-			public boolean acceptUnVerifiedUpdate(final Update update) {
-				UIFunctions uiFunctions = UIFunctionsManager.getUIFunctions();
-				if (uiFunctions != null) {
-					String title = MessageText.getString(MSG_PREFIX
-							+ "accept.unverified.title");
-					String text = MessageText.getString(MSG_PREFIX
-							+ "accept.unverified.text", new String[] {
-						update.getName()
-					});
-					return uiFunctions.promptUser(title, text, new String[] {
-						MessageText.getString("Button.yes"),
-						MessageText.getString("Button.no")
-					}, 1, MSG_PREFIX + "accept.unverified",
-							MessageText.getString("MessageBoxWindow.nomoreprompting"), false,
-							0) == 0;
-				}
-
-				return false;
-			}
-
-			public void verificationFailed(final Update update, final Throwable cause) {
-				final String cause_str = Debug.getNestedExceptionMessage(cause);
-				UIFunctions uiFunctions = UIFunctionsManager.getUIFunctions();
-				if (uiFunctions != null) {
-					String title = MessageText.getString(MSG_PREFIX
-							+ "verification.failed.title");
-					String text = MessageText.getString(MSG_PREFIX
-							+ "verification.failed.text", new String[] {
-						update.getName(),
-						cause_str
-					});
-					uiFunctions.promptUser(title, text, new String[] {
-						MessageText.getString("Button.ok")
-					}, 0, null, null, false, 0);
-				}
-			}
-		});
-
-
-		SimpleTimer.addPeriodicEvent("UpdateMon:autocheck",
-				AUTO_UPDATE_CHECK_PERIOD, new TimerEventPerformer() {
-					public void perform(TimerEvent ev) {
-						performAutoCheck(false);
-					}
-				});
-
-		// wait a bit before starting check to give rest of AZ time to initialise 
-		new DelayedEvent("UpdateMon:wait", 2500, new AERunnable() {
-			public void runSupport() {
-				performAutoCheck(true);
-			}
-		});
 	}
 
 	protected class updateStatusChanger
@@ -306,43 +242,6 @@
 	}
 	
 	protected void performAutoCheck(final boolean start_of_day) {
-		boolean check_at_start = false;
-		boolean check_periodic = false;
-		boolean bOldSWT = SWT.getVersion() < 3139;
-
-		// no update checks for java web start
-
-		if (!SystemProperties.isJavaWebStartInstance()) {
-
-			// force check when SWT is really old
-			check_at_start = COConfigurationManager.getBooleanParameter("update.start")
-					|| bOldSWT;
-			check_periodic = COConfigurationManager.getBooleanParameter("update.periodic");
-		}
-
-		// periodic -> check at start as well
-
-		check_at_start = check_at_start || check_periodic;
-
-		if ((check_at_start && start_of_day) || (check_periodic && !start_of_day)) {
-
-			performCheck(bOldSWT, true, false, null ); // this will implicitly do usage stats
-
-		} else {
-
-			new DelayedEvent("UpdateMon:wait2", 5000, new AERunnable() {
-				public void runSupport() {
-					if (start_of_day) {
-						UIFunctions uiFunctions = UIFunctionsManager.getUIFunctions();
-						if (uiFunctions != null) {
-							uiFunctions.setStatusText("");
-						}
-					}
-
-					CoreUpdateChecker.doUsageStats();
-				}
-			});
-		}
 	}
 
 	public void 
@@ -352,76 +251,6 @@
 		final boolean						isRecheck,
 		final UpdateCheckInstanceListener 	l ) 
 	{
-		long now = SystemTime.getCurrentTime();
-
-		if ( isRecheck ){
-			
-			if ( last_recheck_time > now || now - last_recheck_time < 23*60*60*1000 ){
-				
-				if (Logger.isEnabled())
-					Logger.log(new LogEvent(LOGID,
-							"skipping recheck as consecutive recheck too soon"));
-
-				return;
-			}
-			
-			last_recheck_time = now;
-			
-		}else{
-			
-			last_recheck_time	= 0;
-		}
-		
-		if (SystemProperties.isJavaWebStartInstance()) {
-
-			// just in case we get here somehome!
-			if (Logger.isEnabled())
-				Logger.log(new LogEvent(LOGID,
-						"skipping update check as java web start"));
-
-			return;
-		}
-
-		// kill any existing update window
-
-		if (current_update_window != null && !current_update_window.isDisposed()) {
-			current_update_window.dispose();
-		}
-
-		if (current_update_instance != null) {
-
-			current_update_instance.cancel();
-		}
-
-		UIFunctions uiFunctions = UIFunctionsManager.getUIFunctions();
-		if (uiFunctions != null) {
-			// XXX What kind of format is this!?
-			uiFunctions.setStatusText("MainWindow.status.checking ...");
-		}
-
-		// take this off this GUI thread in case it blocks for a while
-
-		AEThread2 t = new AEThread2("UpdateMonitor:kickoff", true) {
-			public void run() {
-				UpdateManager um = azCore.getPluginManager().getDefaultPluginInterface().getUpdateManager();
-
-				current_update_instance = um.createUpdateCheckInstance(bForce
-						? UpdateCheckInstance.UCI_INSTALL : UpdateCheckInstance.UCI_UPDATE,
-						"update.instance.update");
-
-				if (!automatic) {
-
-					current_update_instance.setAutomatic(false);
-				}
-
-				if (l != null) {
-					current_update_instance.addListener(l);
-				}
-				current_update_instance.start();
-			}
-		};
-
-		t.start();
 	}
 
 	public void complete(UpdateCheckInstance instance) {
