--- org/gudy/azureus2/update/CoreUpdateChecker.java.orig	2006-12-20 17:14:36.000000000 -0800
+++ org/gudy/azureus2/update/CoreUpdateChecker.java	2007-03-29 12:46:47.000000000 -0700
@@ -122,8 +122,6 @@
 		props.setProperty( "plugin.version", plugin_interface.getAzureusVersion());
 		
 		rdf = plugin_interface.getUtilities().getResourceDownloaderFactory();
-	
-		plugin_interface.getUpdateManager().registerUpdatableComponent( this, true );
 	}
 	
 	public String
@@ -142,235 +140,9 @@
 	checkForUpdate(
 		final UpdateChecker	checker )
 	{
-		try{			
-			String	current_version = plugin_interface.getAzureusVersion();
-			
-			log.log( "Update check starts: current = " + current_version );
-													
-			Map	decoded = VersionCheckClient.getSingleton().getVersionCheckInfo(
-		  			first_check?VersionCheckClient.REASON_UPDATE_CHECK_START:VersionCheckClient.REASON_UPDATE_CHECK_PERIODIC);
-
-      
-			displayUserMessage( decoded );
-			
-			String latest_version;
-			String latest_file_name;
-			
-			byte[] b_version = (byte[])decoded.get("version");
-			
-			if ( b_version != null ){
-			
-				latest_version = new String( b_version );
-				
-				plugin_interface.getPluginProperties().setProperty( LATEST_VERSION_PROPERTY, latest_version );
-				
-			}else{
-				
-				throw( new Exception( "No version found in reply" ));
-			}
-			
-			byte[] b_filename = (byte[]) decoded.get("filename");
-			
-			if ( b_filename != null ){
-			
-				latest_file_name = new String( b_filename );
-				
-			}else{
-				
-				throw( new Exception( "No update file details in reply" ));
-			}
-			
-			//latest_version 		= "3.0.0.3";
-			//latest_file_name	= "http://torrents.aelitis.com:88/torrents/Azureus2.5.0.0.jar.torrent";
-			//latest_file_name	= "Azureus2.5.0.0.jar.torrent";
-			
-			String	msg = "Core: latest_version = '" + latest_version + "', file = '" + latest_file_name + "'";
-			
-			URL		full_download_url;
-			
-				// since 2501 we support a full download URL, falling back to SF mirrors if this
-				// fails. 
-					
-			if ( latest_file_name.startsWith( "http" )){
-				
-				try{
-					full_download_url	= new URL( latest_file_name );
-					
-				}catch( Throwable e ){
-					
-					full_download_url = null;
-					
-					log.log( e );
-				}
-				
-				int	pos = latest_file_name.lastIndexOf( '/' );
-				
-				latest_file_name = latest_file_name.substring( pos+1 );
-				
-			}else{
-				
-				full_download_url	= null;
-			}
-			
-			checker.reportProgress( msg );
-			
-			log.log( msg );
-			
-			if ( !shouldUpdate( current_version, latest_version )){
-				
-				return;
-			}
-				
-			final String	f_latest_version	= latest_version;
-			final String	f_latest_file_name	= latest_file_name;
-			
-			ResourceDownloader	top_downloader;
-			
-			if ( full_download_url == null ){
-				
-				ResourceDownloader[]	primary_mirrors;
-					
-				primary_mirrors = getPrimaryDownloaders( latest_file_name );
-	
-					// the download hierarchy is primary mirrors first (randomised alternate)
-					// then backup mirrors (randomised alternate)
-				
-					// we don't want to load the backup mirrors until the primary mirrors fail
-				
-				ResourceDownloader		random_primary_mirrors = rdf.getRandomDownloader( primary_mirrors );
-				
-				ResourceDownloader		backup_downloader =
-					rdf.create(
-						new ResourceDownloaderDelayedFactory()
-						{
-							public ResourceDownloader
-							create()
-							{
-								ResourceDownloader[]	backup_mirrors = getBackupDownloaders( f_latest_file_name );
-							
-								return( rdf.getRandomDownloader( backup_mirrors ));
-							}
-						});
-								
-				top_downloader = 
-					rdf.getAlternateDownloader( 
-							new ResourceDownloader[]
-								{
-									random_primary_mirrors,
-									backup_downloader,
-								});
-
-			}else{
-				
-				ResourceDownloader full_rd = rdf.create( full_download_url );
-				
-				full_rd = rdf.getSuffixBasedDownloader( full_rd );
-				
-				ResourceDownloader		primary_downloader =
-					rdf.create(
-						new ResourceDownloaderDelayedFactory()
-						{
-							public ResourceDownloader
-							create()
-							{
-								ResourceDownloader[]	primary_mirrors = getPrimaryDownloaders( f_latest_file_name );
-							
-								return( rdf.getRandomDownloader( primary_mirrors ));
-							}
-						});
-					
-				ResourceDownloader		backup_downloader =
-					rdf.create(
-						new ResourceDownloaderDelayedFactory()
-						{
-							public ResourceDownloader
-							create()
-							{
-								ResourceDownloader[]	backup_mirrors = getBackupDownloaders( f_latest_file_name );
-							
-								return( rdf.getRandomDownloader( backup_mirrors ));
-							}
-						});
-				
-				
-				top_downloader = 
-					rdf.getAlternateDownloader( 
-							new ResourceDownloader[]
-								{
-									full_rd,
-									primary_downloader,
-									backup_downloader,
-								});
-			}
-			
-			top_downloader.addListener( rd_logger );
-			
-				// get size so it is cached
-			
-			top_downloader.getSize();		
-							
-
-			byte[]	info_b = (byte[])decoded.get( "info" );
-			
-			String	info = null;
-			
-			if ( info_b != null ){
-			
-				try{
-					info = new String( info_b );
-				
-				}catch( Throwable e ){
-					
-					Debug.printStackTrace( e );
-				}
-			}
-			
-			String[]	desc;
-			
-			if ( info == null ){
-				
-				desc = new String[]{"Core Azureus Version" };
-				
-			}else{
-				
-				desc = new String[]{"Core Azureus Version", info };
-			}
-			
-			final Update update = 
-				checker.addUpdate(
-						"Core Azureus Version",
-						desc,
-						latest_version,
-						top_downloader,
-						Update.RESTART_REQUIRED_YES );
-			
-			top_downloader.addListener( 
-					new ResourceDownloaderAdapter()
-					{
-						public boolean
-						completed(
-							final ResourceDownloader	downloader,
-							InputStream					data )
-						{	
-							installUpdate( checker, update, downloader, f_latest_version, data );
-									
-							return( true );
-						}
-					});
-		}catch( Throwable e ){
-			
-			log.log( e );
-			
-			Debug.printStackTrace( e );
-			
-			checker.failed();
-			
-		}finally{
-			
 			checker.completed();
 			
 			first_check = false;
-		}
 	}
 	
       
